<!DOCTYPE html>
<html lang="en">
<head>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.8.0/chart.min.js" integrity="sha512-sW/w8s4RWTdFFSduOTGtk4isV1+190E/GghVffMA9XczdJ2MDzSzLEubKAs5h0wzgSJOQTRYyaz73L3d6RtJSg==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <meta charset="UTF-8">
</head>
<body>
{% for item in rows|reverse %}
{% if loop.index <=1 %}
<h3>
    Сегодня {{item.date}}
</h3>
<h3>Текущий курс: {{item.exrate}}</h3>
<h3>Рассчет обменного курса</h3>
<input type="text" id="num2" placeholder="Сумма в рублях" /> =
<input type="text" id="sum" readonly="readonly"/>
<input type="button" value="Рассчитать" onclick="calc()"/>

<script>
    function calc() {
        let num1 = {{item.exrate}};
        let num2 = Number(document.querySelector("#num2").value);
        let sum = num1 * num2;
        document.getElementById("sum").value = sum;
    }
</script>
{% endif %}
{% endfor %}
<div>
  <canvas id="myChart"></canvas>
</div>
<script>

  const data = {
    datasets: [{
      label: 'Тенге за 1 руб.',
      backgroundColor: 'rgb(255, 99, 132)',
      borderColor: 'rgb(255, 99, 132)',
    }]
  };

  const config = {
  type: 'line',
  data: {
    datasets: [{
      data: {
      {% for item in rows|reverse %}
'{{item.date}}': {{item.exrate}},
{% endfor %}
      },
      backgroundColor: 'rgb(255, 99, 132)',
      borderColor: 'rgb(255, 99, 132)',
    }]
},
  options: {
    interaction: {
      intersect: false,
      mode: 'index',
    },
    plugins: {
      title: {
        display: true,
        text: (ctx) => 'Tooltip position mode: ' + ctx.chart.options.plugins.tooltip.position,
      },
    }
  }
};
</script>
<script>
  const myChart = new Chart(
    document.getElementById('myChart'),
    config
  );
</script>
</body>
</html>